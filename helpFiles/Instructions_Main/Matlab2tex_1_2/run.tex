% This file was automatically created from the m-file 
% "m2tex.m" written by USL. 
% The fontencoding in this file is UTF-8. 
%  
% You will need to include the following two packages in 
% your LaTeX-Main-File. 
%  
% \usepackage{color} 
% \usepackage{fancyvrb} 
%  
% It is advised to use the following option for Inputenc 
% \usepackage[utf8]{inputenc} 
%  
  
% definition of matlab colors: 
\definecolor{mblue}{rgb}{0,0,1} 
\definecolor{mgreen}{rgb}{0.13333,0.5451,0.13333} 
\definecolor{mred}{rgb}{0.62745,0.12549,0.94118} 
\definecolor{mgrey}{rgb}{0.5,0.5,0.5} 
\definecolor{mdarkgrey}{rgb}{0.25,0.25,0.25} 
  
\DefineShortVerb[fontfamily=courier,fontseries=m]{\$} 
\DefineShortVerb[fontfamily=courier,fontseries=b]{\#} 
  
\noindent                                                                  \hspace*{-1.6em}{\scriptsize 1}$  $\color{mgreen}$%--------------------------------------------------------------------------$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 2}$  $\color{mgreen}$% Matlab M-file Project: HyEQ Toolbox @  Hybrid Systems Laboratory (HSL), $\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 3}$  $\color{mgreen}$% https://hybrid.soe.ucsc.edu/software$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 4}$  $\color{mgreen}$% http://hybridsimulator.wordpress.com/$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 5}$  $\color{mgreen}$% Filename: run_ex1_2a.m$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 6}$  $\color{mgreen}$%--------------------------------------------------------------------------$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 7}$  $\color{mgreen}$% Project: Simulation of a hybrid system (bouncing ball)$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 8}$  $\color{mgreen}$%--------------------------------------------------------------------------$\color{black}$$\\ \hspace*{-1.6em}{\scriptsize 9}$  $\color{mgreen}$%--------------------------------------------------------------------------$\color{black}$$\\ \hspace*{-2em}{\scriptsize 10}$  $\color{mgreen}$%   See also HYEQSOLVER, PLOTARC, PLOTARC3, PLOTFLOWS, PLOTHARC,$\color{black}$$\\ \hspace*{-2em}{\scriptsize 11}$  $\color{mgreen}$%   PLOTHARCCOLOR, PLOTHARCCOLOR3D, PLOTHYBRIDARC, PLOTJUMPS.$\color{black}$$\\ \hspace*{-2em}{\scriptsize 12}$  $\color{mgreen}$%   Copyright @ Hybrid Systems Laboratory (HSL),$\color{black}$$\\ \hspace*{-2em}{\scriptsize 13}$  $\color{mgreen}$%   Revision: 0.0.0.3 Date: 05/20/2015 3:42:00$\color{black}$$\\ \hspace*{-2em}{\scriptsize 14}$  $\\ \hspace*{-2em}{\scriptsize 15}$  $\color{mblue}$function$\color{black}$ run_ex1_2a$\\ \hspace*{-2em}{\scriptsize 16}$  $\color{mgreen}$% initial conditions$\color{black}$$\\ \hspace*{-2em}{\scriptsize 17}$  x1_0 = 1;$\\ \hspace*{-2em}{\scriptsize 18}$  x2_0 = 0;$\\ \hspace*{-2em}{\scriptsize 19}$  x0 = [x1_0;x2_0];$\\ \hspace*{-2em}{\scriptsize 20}$  $\\ \hspace*{-2em}{\scriptsize 21}$  $\color{mgreen}$% physical variables$\color{black}$$\\ \hspace*{-2em}{\scriptsize 22}$  $\color{mblue}$global$\color{black}$ gamma lambda$\\ \hspace*{-2em}{\scriptsize 23}$  gamma = -9.81;  $\color{mgreen}$% gravity constant$\color{black}$$\\ \hspace*{-2em}{\scriptsize 24}$  lambda = 0.8;   $\color{mgreen}$% restitution coefficent$\color{black}$$\\ \hspace*{-2em}{\scriptsize 25}$  $\\ \hspace*{-2em}{\scriptsize 26}$  $\color{mgreen}$% simulation horizon$\color{black}$$\\ \hspace*{-2em}{\scriptsize 27}$  TSPAN=[0 $\color{mred}$10];$\color{black}$$\\ \hspace*{-2em}{\scriptsize 28}$  JSPAN = [0 20];$\\ \hspace*{-2em}{\scriptsize 29}$  $\\ \hspace*{-2em}{\scriptsize 30}$  $\color{mgreen}$% rule for jumps$\color{black}$$\\ \hspace*{-2em}{\scriptsize 31}$  $\color{mgreen}$% rule = 1 -> priority for jumps$\color{black}$$\\ \hspace*{-2em}{\scriptsize 32}$  $\color{mgreen}$% rule = 2 -> priority for flows$\color{black}$$\\ \hspace*{-2em}{\scriptsize 33}$  rule = 1;$\\ \hspace*{-2em}{\scriptsize 34}$  $\\ \hspace*{-2em}{\scriptsize 35}$  options = odeset($\color{mred}$'RelTol'$\color{black}$,1e-6,$\color{mred}$'MaxStep'$\color{black}$,.1);$\\ \hspace*{-2em}{\scriptsize 36}$  $\\ \hspace*{-2em}{\scriptsize 37}$  $\color{mgreen}$% simulate$\color{black}$$\\ \hspace*{-2em}{\scriptsize 38}$  [t $\color{mred}$j x] = HyEQsolver( @f_ex1_2a,@g_ex1_2a,@C_ex1_2a,@D_ex1_2a,...$\color{black}$$\\ \hspace*{-2em}{\scriptsize 39}$      x0,TSPAN,JSPAN,rule,options);$\\ \hspace*{-2em}{\scriptsize 40}$  $\\ \hspace*{-2em}{\scriptsize 41}$  $\color{mgreen}$% plot solution$\color{black}$$\\ \hspace*{-2em}{\scriptsize 42}$  figure(1) $\color{mgreen}$% position$\color{black}$$\\ \hspace*{-2em}{\scriptsize 43}$  clf$\\ \hspace*{-2em}{\scriptsize 44}$  subplot(2,1,1), $\color{mred}$plotHarc(t,j,x(:,1));$\color{black}$$\\ \hspace*{-2em}{\scriptsize 45}$  grid $\color{mred}$on$\color{black}$$\\ \hspace*{-2em}{\scriptsize 46}$  ylabel($\color{mred}$'x_1 position'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 47}$  subplot(2,1,2), $\color{mred}$plotHarc(t,j,x(:,2));$\color{black}$$\\ \hspace*{-2em}{\scriptsize 48}$  grid $\color{mred}$on$\color{black}$$\\ \hspace*{-2em}{\scriptsize 49}$  ylabel($\color{mred}$'x_2 velocity'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 50}$  $\\ \hspace*{-2em}{\scriptsize 51}$  $\color{mgreen}$% plot phase plane$\color{black}$$\\ \hspace*{-2em}{\scriptsize 52}$  figure(2) $\color{mgreen}$% position$\color{black}$$\\ \hspace*{-2em}{\scriptsize 53}$  clf$\\ \hspace*{-2em}{\scriptsize 54}$  plotHarcColor(x(:,1),j,x(:,2),t);$\\ \hspace*{-2em}{\scriptsize 55}$  xlabel($\color{mred}$'x_1'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 56}$  ylabel($\color{mred}$'x_2'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 57}$  grid $\color{mred}$on$\color{black}$$\\ \hspace*{-2em}{\scriptsize 58}$  $\\ \hspace*{-2em}{\scriptsize 59}$  $\color{mgreen}$% plot hybrid arc$\color{black}$$\\ \hspace*{-2em}{\scriptsize 60}$  figure(3)$\\ \hspace*{-2em}{\scriptsize 61}$  plotHybridArc(t,j,x)$\\ \hspace*{-2em}{\scriptsize 62}$  xlabel($\color{mred}$'j'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 63}$  ylabel($\color{mred}$'t'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 64}$  zlabel($\color{mred}$'x1'$\color{black}$)$\\ \hspace*{-2em}{\scriptsize 65}$  $\\ 
  
\UndefineShortVerb{\$} 
\UndefineShortVerb{\#}