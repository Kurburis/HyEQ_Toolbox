\begin{example}{vehicle following a track with boundaries}
\label{ex:dubinspath}
Consider a vehicle modeled by a Dubins vehicle model traveling along a given track with state vector $x=[\xi_1, \xi_2, \xi_3]^\top$ with dynamics given by $\dot{\xi_1}=u\cos{\xi_3}$, $\dot{\xi_2}=u\sin{\xi_3}$, and $\dot{\xi_3}=-\xi_3+r(q)$. The input $u$ is the tangential velocity of the vehicle, $\xi_1$ and $\xi_2$ describe the vehicle's position on the plane, and $\xi_3$ is the vehicle's orientation angle. Also consider a switching controller attempting to keep the vehicle inside the boundaries of a track given by $\{(\xi_1,\xi_2):-1\leq\xi_1\leq1\}$. A state $q \in \{1,2\}$ is used to define the modes of operation of the controller. When $q=1$, the vehicle is traveling to the left, and when $q=2$, the vehicle is traveling to the right. A logic variable $r$ is defined in order to steer the vehicle back inside the boundary. The state of the closed-loop system is given by $x := [\xi^\top\ q]^\top$. A model of such a closed-loop system is given by
\begin{eqnarray}
f(x,u) & := & \left[
\begin{array}{c}
 \left[
\begin{array}{c}
   u\cos(\xi_3) \\
   u\sin(\xi_3)\\
   -\xi_3+r(q)\\
\end{array} \right] \\
u
\end{array} \right], \hspace{.1in}
r(q) := \left\{
\begin{array}{c}
\frac{3\pi}{4} \hspace{.1in} $if$ \hspace{.1in} q=1\\
\frac{\pi}{4} \hspace{.1in} $if$ \hspace{.1in} q=2 \\
\end{array} \right. \\
C & : = & \defset{(\xi,u)\in \Re^{3}\times\{1,2\}\times \Re}{(\xi_1 \leq 1 , q = 2) \mbox { or } (\xi_1 \geq -1 , q=1)}, \\
g(\xi,u) &:=&
\left\{
\begin{array}{ll}
\matt{\xi \\ 2 }
& $if$ \hspace{.15in} \xi_1\leq-1, \hspace{.1in} q=1\\
\matt{\xi \\ 1 }
& $if$ \hspace{.15in} \xi_1\geq 1, \hspace{.1in} q=2
\end{array} \right. ,\\
    D\ &: =&\defset{(\xi,u)\in \Re^{3}\times\{1,2\} \times \Re}{(\xi_1 \geq 1 ,  q = 2) \mbox { or } (\xi_1 \leq -1 ,  q=1)}
%(\Re^{2}\times\Re) \setminus C
\end{eqnarray}

The MATLAB scripts in each of the function blocks of the implementation above are given as follows. The tangential velocity of the vehicle is chosen to be $u=1$, the initial position on the plane is chosen to be $(\xi_1,\xi_2)=(0,0)$, and the initial orientation angle is chosen to be $\xi_3=\frac{\pi}{4}$ radians.

%\begin{figure}[ht]
%  \begin{center}
%  \psfrag{flows [t]}[c]{flows [$t$]}
%  \psfrag{jumps [j]}[c]{jumps [$j$]}
%  \psfrag{xi1}[c]{$\xi_1$}
%    {\includegraphics[width=.8\textwidth]{figures/Examples/DubinsFlowsJumps.eps}}
%   \caption{Solution of Example~\ref{ex:dubinspath}: trajectory}
%\label{fig:Dubins-1}
%  \end{center}
%\end{figure}
%
%\begin{figure}[ht]
%  \begin{center}
%  \psfrag{t}[c]{$t$}
%  \psfrag{j}[c]{$j$}
%  \psfrag{xi1}[c]{$\xi_1$}
%    {\includegraphics[width=.8\textwidth]{figures/Examples/DubinsHybridArc.eps}}
%   \caption{Hybrid arc corresponding to a solution of Example~\ref{ex:dubinspath}: trajectory}
%\label{fig:Dubins-2}
%  \end{center}
%\end{figure}

\begin{figure}[ht]
  \centering
  \psfrag{flows [t]}[c]{flows [$t$]}
  \psfrag{jumps [j]}[c]{jumps [$j$]}
  \psfrag{t}[c]{$t$}
  \psfrag{j}[c]{$j$}
  \psfrag{xi1}[c]{$\xi_1$}
  \psfrag{xi1}[c]{$\xi_1$}
\subfigure[Trajectory]{
    \includegraphics[width=.45\textwidth]{figures/Examples/DubinsFlowsJumps.eps}
\label{fig:Dubins-1}}
\qquad
\subfigure[Hybrid arc]{
    \includegraphics[width=.45\textwidth]{figures/Examples/DubinsHybridArc.eps}
\label{fig:Dubins-2}}
   \caption{Solution of Example~\ref{ex:dubinspath}}
\end{figure}

% % Set the location for MATLAB files included via the "\code" command.
\codeLocation{Matlab2tex_1_5}

\code{f.m}
\code{C.m}
\code{g.m}
\code{D.m}

% Flow map
% %\scriptsize
% \input{Matlab2tex_1_5/f.tex}\label{scr:f}
% %\normalsize

% Flow set
% %\scriptsize
% \input{Matlab2tex_1_5/C.tex}\label{scr:C}
% %\normalsize

% Jump map
% %\scriptsize
% \input{Matlab2tex_1_5/g.tex}\label{scr:g}
% %\normalsize

% Jump set
% %\scriptsize
% \input{Matlab2tex_1_5/D.tex}\label{scr:D}
% %\normalsize


A solution to the system of a vehicle following a track in $\{(\xi_1,\xi_2):-1\leq \xi_1 \leq1\}$, and with
$T=15, J=10$, $rule =1$, is depicted in Figure~\ref{fig:Dubins-1} (trajectory).  Both the
projection onto $t$ and $j$ are shown. Figure~\ref{fig:Dubins-2} depicts the corresponding
hybrid arc.

For MATLAB/Simulink files of this example, see \IfSAE{Examples/Example\_\ref{ex:dubinspath}}{Examples/Example\_1.5}.

\end{example}

